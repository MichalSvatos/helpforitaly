{"version":3,"sources":["src/js/sharer.js"],"names":["window","document","Sharer","elem","init","elems","querySelectorAll","i","l","length","addEventListener","add","target","currentTarget","srcElement","sharer","share","prototype","constructor","getValue","attr","val","getAttribute","startsWith","toLowerCase","sharers","facebook","shareUrl","params","u","hashtag","linkedin","url","mini","twitter","text","hashtags","via","email","subject","body","isLink","whatsapp","telegram","to","reddit","messenger","link","s","width","height","undefined","urlSharer","p","keys","Object","str","encodeURIComponent","popWidth","popHeight","left","innerWidth","screenX","top","innerHeight","screenY","popParams","newWindow","open","focus","location","href","readyState"],"mappings":"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","file":"sharer.js","sourceRoot":"..","sourcesContent":["/**\n * @preserve\n * Sharer.js\n *\n * @description Create your own social share buttons\n * @version 0.4.0\n * @author Ellison Leao <ellisonleao@gmail.com>\n * @license GPLv3\n *\n */\n\n(function(window, document) {\n    'use strict';\n    /**\n   * @constructor\n   */\n    var Sharer = function(elem) {\n        this.elem = elem;\n    };\n\n    /**\n   *  @function init\n   *  @description bind the events for multiple sharer elements\n   *  @returns {Empty}\n   */\n    Sharer.init = function() {\n        var elems = document.querySelectorAll('[data-sharer]'),\n            i,\n            l = elems.length;\n\n        for (i = 0; i < l; i++) {\n            elems[i].addEventListener('click', Sharer.add);\n        }\n    };\n\n    /**\n   *  @function add\n   *  @description bind the share event for a single dom element\n   *  @returns {Empty}\n   */\n    Sharer.add = function(elem) {\n        var target = elem.currentTarget || elem.srcElement;\n        var sharer = new Sharer(target);\n        sharer.share();\n    };\n\n    // instance methods\n    Sharer.prototype = {\n        constructor: Sharer,\n        /**\n     *  @function getValue\n     *  @description Helper to get the attribute of a DOM element\n     *  @param {String} attr DOM element attribute\n     *  @returns {String|Empty} returns the attr value or empty string\n     */\n        getValue: function(attr) {\n            var val = this.elem.getAttribute('data-' + attr);\n            // handing facebook hashtag attribute\n            if (val && attr === 'hashtag') {\n                if (!val.startsWith('#')) {\n                    val = '#' + val;\n                }\n            }\n            return val;\n        },\n\n        /**\n     * @event share\n     * @description Main share event. Will pop a window or redirect to a link\n     * based on the data-sharer attribute.\n     */\n        share: function() {\n            var sharer = this.getValue('sharer').toLowerCase(),\n                sharers = {\n                    facebook: {\n                        shareUrl: 'https://www.facebook.com/sharer/sharer.php',\n                        params: {\n                            u: this.getValue('url'),\n                            hashtag: this.getValue('hashtag')\n                        }\n                    },\n                    linkedin: {\n                        shareUrl: 'https://www.linkedin.com/shareArticle',\n                        params: {\n                            url: this.getValue('url'),\n                            mini: true\n                        }\n                    },\n                    twitter: {\n                        shareUrl: 'https://twitter.com/intent/tweet/',\n                        params: {\n                            text: this.getValue('title'),\n                            url: this.getValue('url'),\n                            hashtags: this.getValue('hashtags'),\n                            via: this.getValue('via')\n                        }\n                    },\n                    email: {\n                        shareUrl: 'mailto:' + this.getValue('to') || '',\n                        params: {\n                            subject: this.getValue('subject'),\n                            body: this.getValue('title') + '\\n' + this.getValue('url')\n                        },\n                        isLink: true\n                    },\n                    whatsapp: {\n                        shareUrl: this.getValue('web') !== null ? 'https://api.whatsapp.com/send' : 'whatsapp://send',\n                        params: {\n                            text: this.getValue('title') + ' ' + this.getValue('url')\n                        },\n                        isLink: true\n                    },\n                    telegram: {\n                        shareUrl: this.getValue('web') !== null ? 'https://telegram.me/share' : 'tg://msg_url',\n                        params: {\n                            text: this.getValue('title'),\n                            url: this.getValue('url'),\n                            to: this.getValue('to')\n                        },\n                        isLink: true\n                    },\n                    reddit: {\n                        shareUrl: 'https://www.reddit.com/submit',\n                        params: { url: this.getValue('url') }\n                    },\n                    messenger: {\n                        shareUrl: 'fb-messenger://share',\n                        params: {\n                            link: this.getValue('url')\n                        }\n                    }\n                },\n                s = sharers[sharer];\n\n            // custom popups sizes\n            if (s) {\n                s.width = this.getValue('width');\n                s.height = this.getValue('height');\n            }\n            return s !== undefined ? this.urlSharer(s) : false;\n        },\n        /**\n     * @event urlSharer\n     * @param {Object} sharer\n     */\n        urlSharer: function(sharer) {\n            var p = sharer.params || {},\n                keys = Object.keys(p),\n                i,\n                str = keys.length > 0 ? '?' : '';\n            for (i = 0; i < keys.length; i++) {\n                if (str !== '?') {\n                    str += '&';\n                }\n                if (p[keys[i]]) {\n                    str += keys[i] + '=' + encodeURIComponent(p[keys[i]]);\n                }\n            }\n            sharer.shareUrl += str;\n\n            if (!sharer.isLink) {\n                var popWidth = sharer.width || 600,\n                    popHeight = sharer.height || 480,\n                    left = window.innerWidth / 2 - popWidth / 2 + window.screenX,\n                    top = window.innerHeight / 2 - popHeight / 2 + window.screenY,\n                    popParams = 'scrollbars=no, width=' + popWidth + ', height=' + popHeight + ', top=' + top + ', left=' + left,\n                    newWindow = window.open(sharer.shareUrl, '', popParams);\n\n                if (window.focus) {\n                    newWindow.focus();\n                }\n            } else {\n                window.location.href = sharer.shareUrl;\n            }\n        }\n    };\n\n    // adding sharer events on domcontentload\n    if (document.readyState === 'complete' || document.readyState !== 'loading') {\n        Sharer.init();\n    } else {\n        document.addEventListener('DOMContentLoaded', Sharer.init);\n    }\n\n    // turbolinks 3 compatibility\n    window.addEventListener('page:load', Sharer.init);\n\n    // turbolinks 5 compatibility\n    window.addEventListener('turbolinks:load', Sharer.init);\n\n    // exporting sharer for external usage\n    window.Sharer = Sharer;\n})(window, document);\n"]}