{"version":3,"sources":["src/js/script.js"],"names":["version","Math","floor","random","ajax_get","url","callback","xmlhttp","XMLHttpRequest","onreadystatechange","readyState","status","data","JSON","parse","responseText","err","open","send","slugify","str","toLowerCase","replace","lazyLoad","titles","document","querySelectorAll","observer","IntersectionObserver","onIntersection","titleEntities","forEach","title","isIntersecting","unobserve","target","classList","add","observe","locations","finalHtml","i","location","hasLocationGroup","find","o","name","html","index","findIndex","x","locationObj","push","length","className","getElementById","innerHTML","links","setTimeout"],"mappings":";AAsHA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,mDAAA,SAAA,EAAA,GAAA,GAAA,OAAA,YAAA,OAAA,IAAA,uBAAA,OAAA,UAAA,SAAA,KAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,CAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,EAAA,QAAA,EAAA,EAAA,OAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,GAjHA,IAAIA,EAAUC,KAAKC,MAAuB,IAAhBD,KAAKE,SAAkB,GAEjD,SAASC,EAASC,EAAKC,GAClBC,IAAAA,EAAU,IAAIC,eAElBD,EAAQE,mBAAqB,WACxBF,GAAsB,GAAtBA,EAAQG,YAAqC,KAAlBH,EAAQI,OAAe,CACjD,IACCC,IAAAA,EAAOC,KAAKC,MAAMP,EAAQQ,cAE7B,MAAMC,GACP,OAGDV,EAASM,KAIXL,EAAQU,KAAK,MAAOZ,GAAK,GACzBE,EAAQW,OAkET,SAASC,EAAQC,GAMTA,OALPA,EAAMA,EACJC,cACAC,QAAQ,OAAQ,KAChBA,QAAQ,eAAgB,IAO3B,SAASC,IACJC,IAAAA,EAAYC,EAAAA,SAASC,iBAAiB,iBAWtCC,IAAAA,EAAW,IAAIC,qBATVC,SAAeC,GACvBA,EAAcC,QAAQ,SAAAC,GACjBA,EAAMC,iBACTN,EAASO,UAAUF,EAAMG,QACzBH,EAAMG,OAAOC,UAAUC,IAAI,kBAO9Bb,EAAOO,QAAQ,SAAAC,GAASL,OAAAA,EAASW,QAAQN,KAxF1C5B,EAAS,0BAA4BJ,EAAS,SAASY,GAMjD,IALD2B,IAAAA,EAAY,GAEZC,EAAY,GAGPC,EAAAA,SAAAA,GAEJC,IAAAA,EAAW9B,EAAI,aAAiB6B,GAArB,SACXE,EAAmBJ,EAAUK,KAAK,SAAAC,GAAKA,OAAAA,EAAEC,OAASJ,IAGlDK,EAAoBnC,YAAAA,OAAAA,EAAI,aAAiB6B,GAArB,IACc7B,4GAAAA,OAAAA,EAAI,aAAiB6B,GAArB,KACF7B,sDAAAA,OAAAA,EAAI,aAAiB6B,GAArB,IACC7B,uDAAAA,OAAAA,EAAI,aAAiB6B,GAArB,KAHrC,oIASIE,GAAAA,EAAkB,CACjBK,IAAAA,EAAQT,EAAUU,UAAU,SAAAC,GAAKA,OAAAA,EAAEJ,OAASJ,IAChDH,EAAUS,GAAOD,MAAQA,MAEnB,CACFI,IAAAA,EAAc,CACjBL,KAAOJ,EACPK,KAAOA,GAGRR,EAAUa,KAAKD,KAzBRV,EAAI,EAAGA,EAAI7B,EAAI,aAAiByC,OAAQZ,IAAxCA,EAAAA,GA6BJ,IAAA,IAAIA,EAAI,EAAGA,EAAIF,EAAUc,OAAQZ,IAAK,CACtCK,IAAAA,EAAOP,EAAUE,GAAGK,KACpBC,EAAOR,EAAUE,GAAGM,KACpBO,EAAYnC,EAAQ2B,GAExBN,GAAyEc,4DAAAA,OAAAA,EAChBR,uEAAAA,OAAAA,EAEVC,kEAAAA,OAAAA,EAH/C,4BAODtB,SAAS8B,eAAe,gBAAgBC,UAAYhB,IAIrDpC,EAAS,mBAAqBJ,EAAS,SAAUY,GAG3C,IAFD6C,IAAAA,EAAQ,GAEHhB,EAAE,EAAGA,EAAI7B,EAAI,MAAUyC,OAAQZ,IACvCgB,GAAyB7C,gBAAAA,OAAAA,EAAI,MAAU6B,GAAd,IAA2D7B,qCAAAA,OAAAA,EAAI,MAAU6B,GAAd,MAApF,aAGDhB,SAAS8B,eAAe,SAASC,UAAYC,IAiC9CC,WAAWnC,EAAU","file":"script.8848c1ce.js","sourceRoot":"..","sourcesContent":["// Ajax request for JSON data with vanilla JavaScript\n// https://code-maven.com/ajax-request-for-json-data\n// by Gabor Szabo\n// edited\n\nlet version = Math.floor((Math.random() * 100) + 1);\n\nfunction ajax_get(url, callback) {\n\tvar xmlhttp = new XMLHttpRequest();\n\n\txmlhttp.onreadystatechange = function() {\n\t\tif (xmlhttp.readyState == 4 && xmlhttp.status == 200) {\n\t\t\ttry {\n\t\t\t\tvar data = JSON.parse(xmlhttp.responseText);\n\n\t\t\t} catch(err) {\n\t\t\t\treturn;\n\n\t\t\t}\n\t\t\tcallback(data);\n\t\t}\n\t};\n\n\txmlhttp.open(\"GET\", url, true);\n\txmlhttp.send();\n}\n\najax_get('data/institutions.json?' + version, function(data) {\n\tlet locations = [];\n\tlet html = '';\n\tlet finalHtml = '';\n\n\t// ... with the help from Petr Kinc :)\n\tfor (let i = 0; i < data['institutions'].length; i++) {\n\n\t\tlet location = data['institutions'][i][\"location\"];\n\t\tlet hasLocationGroup = locations.find(o => o.name === location);\n\t\t// let payments = data['institutions'][i][\"payment\"];\n\n\t\tlet html =  `<a href=\"${data['institutions'][i][\"url\"]}\" target=\"_blank\" rel=\"noopener\" class=\"institution__item\">\n\t\t\t\t\t<span class=\"institution__title\">${data['institutions'][i][\"name\"]}</span>\n\t\t\t\t\t<span class=\"institution__url\">${data['institutions'][i][\"url\"]}</span>\n\t\t\t\t\t<span class=\"institution__desc\">${data['institutions'][i][\"desc\"]}</span>\n\t\t\t\t\t<span class=\"institution__tags\">\n\t\t\t\t\t\t<span class=\"location\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</a>`;\n\n\t\tif (hasLocationGroup) {\n\t\t\tlet index = locations.findIndex(x => x.name === location);\n\t\t\tlocations[index].html += html;\n\n\t\t} else {\n\t\t\tlet locationObj = {\n\t\t\t\tname : location,\n\t\t\t\thtml : html\n\t\t\t};\n\n\t\t\tlocations.push(locationObj);\n\t\t}\n\t}\n\n\tfor (let i = 0; i < locations.length; i++) {\n\t\tlet name = locations[i].name;\n\t\tlet html = locations[i].html;\n\t\tlet className = slugify(name);\n\n\t\tfinalHtml += `<div class=\"instutitions__section institutions__section--${className}\">\n\t\t\t\t\t\t<h4 class=\"institutions__region-title js-lazyload\">${name}</h4>\n\n\t\t\t\t\t\t<div class=\"institution__region-wrapper\">${html}</div>\n\t\t\t\t\t</div>`;\n\t}\n\n\tdocument.getElementById(\"institutions\").innerHTML = finalHtml;\n});\n\n\najax_get('data/links.json?' + version, function (data) {\n\tlet links = '';\n\n\tfor (let i=0; i < data['links'].length; i++) {\n\t\tlinks += `<li><a href=\"${data['links'][i][\"url\"]}\" target=\"_blank\" rel=\"noopener\">${data['links'][i][\"title\"]}</a></li>`\n\t}\n\n\tdocument.getElementById(\"links\").innerHTML = links;\n});\n\n\n// Slugify string\nfunction slugify(str) {\n\tstr = str\n\t\t.toLowerCase()\n\t\t.replace(/\\s+/g, \"-\")\n\t\t.replace(/[^a-z0-9 -]/g, \"\");\n\n\treturn str;\n}\n\n// Thanks Filip Vitas\n// https://medium.com/@filipvitas/lazy-load-images-with-zero-javascript-2c5bcb691274\nfunction lazyLoad(){\n\tlet titles =[...document.querySelectorAll('.js-lazyload')];\n\t\n\tfunction onIntersection(titleEntities) {\n\t\ttitleEntities.forEach(title => {\n\t\t\tif (title.isIntersecting) {\n\t\t\t\tobserver.unobserve(title.target);\n\t\t\t\ttitle.target.classList.add('is-loaded');\n\t\t\t}\n\t\t})\n\t}\n\n\tlet observer = new IntersectionObserver(onIntersection);\n\n\ttitles.forEach(title => observer.observe(title));\n}\n\nsetTimeout(lazyLoad, 2000);"]}